<style>
/* 1. THE REFINED ANIMATION SETTINGS */
.reveal {
  opacity: 0;
  transform: translateY(30px) scale(0.98); /* Added slight scale for depth */
  transition: 
    opacity 1.4s cubic-bezier(0.2, 0.8, 0.2, 1), 
    transform 1.4s cubic-bezier(0.2, 0.8, 0.2, 1);
  will-change: transform, opacity; /* Tells the phone to use the GPU */
  backface-visibility: hidden; /* Fixes "jitter" on mobile browsers */
}

.reveal.visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* 2. STAGGERED TIMING (The 'Waterfall' Effect) */
.card-grid .card:nth-child(1) { transition-delay: 0.1s; }
.card-grid .card:nth-child(2) { transition-delay: 0.25s; }
.card-grid .card:nth-child(3) { transition-delay: 0.4s; }

/* 3. SMOOTHING THE SCROLL (Add to your body tag) */
html {
  scroll-behavior: smooth;
}
</style>

<script>
// THE OPTIMIZED OBSERVER
const observerOptions = {
  threshold: 0.1, // Starts the animation as soon as 10% is visible
  rootMargin: "0px 0px -10% 0px" // Trigger slightly before it hits the viewport
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      // Once it's visible, we stop observing to save battery/memory
      observer.unobserve(entry.target);
    }
  });
}, observerOptions);

document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>
